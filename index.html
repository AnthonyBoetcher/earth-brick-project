<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S3RW0FLNVC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-S3RW0FLNVC');
</script>

      <title>Earth(brick) Project</title>  
        <meta charset="utf-8" />
        <!-- bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <meta name="type" content="Earth(brick) project" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- leaflet css -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
        <!-- leaflet js -->
 <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
 integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
 crossorigin=""></script>

 <link rel="icon" type="image/x-icon" href="x5.png">
        <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">

<style>
body {
  background-image: url('aa.jpg');
}

h4{
    color: white;
}

footer{
  margin: 20px 0 0 0;
}
  
  #leaflet-map {
    width: 100%;
    height: 800px;
    min-height: 100%;
    max-height: 75vh;
  }

  /* z-index for for navbar */
  .leaflet-top,
  .leaflet-bottom {
    z-index: 999;
  }

  #details {
    background-color: #f9f9f9;
    max-height: 75vh;
    overflow-y: auto;
    overflow-x: hidden;
  }

  #details .help {
    flex-direction: column;
    height: 100%;
    min-height: 200px;
  }

  #details .help .box {
    height: 50%;
    min-height: 100px;
    display: flex;
    align-items: center;
  }

  #details .project-details {
    height: 100%;
  }

  #details svg {
    width: 40px;
  }

  .filters {
  display: flex;
  flex-wrap: wrap;
  gap: 10px; /* Adjust spacing between items */
  justify-content: left space-between; /* Align items evenly across the row */
}

.listed-project{
  cursor:pointer;
}

  #details .return-to-list,
  .results .reset-filter,
  .clear-filter {
    cursor: pointer;
  }

  #details .website-url svg,
  #details .file-url svg,
  #details .return-to-list svg {
    height: 16px;
    width: 16px;
    margin-right: 4px;
    margin-top: -4px;
  }

  #details .type,
  #details table {
    font-size: 1rem;
  }

  #details .col-img {
    justify-content: flex-end;
    flex-direction: column;
  }

  #details img {
    width: 100%;
    max-height: 250px;
    object-fit: cover;
    border-bottom-left-radius: .25rem;
  }

  @media(min-width: 992px) {
    #details {
      border-top-right-radius: 0 !important;
      border-bottom-right-radius: 0 !important;
      border-right: none !important;
      height: 100%;
    }
  }

    @media(max-width: 992px) {
    #details {
      border-top-right-radius: 0 !important;
      border-bottom-right-radius: 0 !important;
      border-right: none !important;
      height: 100%;
    }

    #leaflet-map {
      border-top-left-radius: 0 !important;
      border-bottom-left-radius: 0 !important;
    }
  }

  #details:not(.show-project) .project-details,
  #details:not(.no-results) .no-results,
  #details:not(.results) .results,
  #details.show-project .help,
  #details.no-results .help,
  #details.results .help {
    display: none !important;
  }

  a {
    text-decoration: none;
    color: rgb(185, 206, 255);
  }

</style>

    </head>

    <body>     
      

<div style="background-color: rgba(0, 127, 238, 0.429); width:95vw; margin:auto">

  <!--<p></p><p></p><h4><b>Welcome! </b>This webpage facilitates local production of <a href="https://globalabc.org/CSEBsustainable-materials-hub/resources/african-standard-wd-ars-13332018-compressed-stabilized-earth">Compressed Stabilised Earth Bricks (CSEB)</a>, in an effort to encourage sustainable construction practices as described by the <a href="https://globalabc.org/sustainable-materials-hub/home">Global Alliance for Building and Construction's sustainable building materials hub</a></h4>
<p></p><p></p>-->

  <div style="padding:1vw" class="row filters my-2">

   <!--<div class="col-md-6 col-lg-4 mb-2">
      
      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <div class="input-group-text">Search</div>
        </div>
        <input class="form-control search filter" type="text" name="search" placeholder="">
      </div>
    </div>--> 


    <div class="col-md-6 col-lg-2 mb-2">
      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <div class="input-group-text">Mpa</div>
        </div>
        <select  class="custom-select type filter">
          <option  value="all" selected>All</option>

              <option value="OneMpa" >0-1Mpa</option>
              <option value="TwoMpa" >1-2Mpa</option>
              <option value="ThreeMpa">2-3Mpa</option>
              <option value="FourMpa">3-4Mpa</option>
              <option value="FiveMpa">4Mpa+</option>
        </select>
      </div>
    </div>

    <div class="col-md-6 col-lg-2 mb-2">
      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <div class="input-group-text">Clay %</div>
        </div>
        <select  class="custom-select clay filter">
          <option value="all" selected>All</option>

          <option value="Clay1020">10-20%</option>

          <option value="Clay2030">20-30%</option>

              <option value="Clay3040">30-40%</option>
            
              <option value="Clay4050">40-50%</option>
                            </select>
      </div>
    </div>   
    
    <div class="col-md-6 col-lg-2 mb-2">
        <div class="input-group mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text">Sand %</div>
          </div>
          <select  class="custom-select sand filter">
            <option value="all" selected>All</option>
  
            <option value="Sand5060">50-60%</option>
  
            <option value="Sand6070">60-70%</option>
  
                <option value="Sand7080">70-80%</option>
              
                <option value="Sand8090">80-90%</option>
                              </select>
        </div>
      </div>   

      <div class="col-md-6 col-lg-2 mb-2">
        <div class="input-group mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text">Cement %</div>
          </div>
          <select  class="custom-select cement filter">
            <option value="all" selected>All</option>
  
            <option value="Cement5">5%</option>
  
            <option value="Cement7">7%</option>
  
                <option value="Cement9">9%</option>
              
                <option value="Cement11">11%</option>
                              </select>
        </div>
      </div>   



      </div>


  <div class="row mb-4">
    <div class="col-lg-4 pr-lg-0 mb-4 mb-lg-0">
      <div class="border rounded position-relative" id="details">
        

        <div class="project-details row">
          <div class="col-12">
            <div class="p-3">
              <h3 class="name"></h3>
              <div class="mb-2">
                <span class="Type badge badge-dark"></span>
                <span class="Clay badge badge-dark"></span>
                <span class="Sand badge badge-dark"></span>
                <span class="Cement badge badge-dark"></span>

              </div>

              <a class="btn btn-primary website-url mb-2" href="" target="_blank" hidden>
                <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#fff"><path d="M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z"></path></svg>
                
              </a>

              <a class="btn btn-primary file-url mb-2" href="" target="_blank" hidden>
                <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#fff"><path d="M369.9 97.98L286.02 14.1c-9-9-21.2-14.1-33.89-14.1H47.99C21.5.1 0 21.6 0 48.09v415.92C0 490.5 21.5 512 47.99 512h288.02c26.49 0 47.99-21.5 47.99-47.99V131.97c0-12.69-5.1-24.99-14.1-33.99zM256.03 32.59c2.8.7 5.3 2.1 7.4 4.2l83.88 83.88c2.1 2.1 3.5 4.6 4.2 7.4h-95.48V32.59zm95.98 431.42c0 8.8-7.2 16-16 16H47.99c-8.8 0-16-7.2-16-16V48.09c0-8.8 7.2-16.09 16-16.09h176.04v104.07c0 13.3 10.7 23.93 24 23.93h103.98v304.01zM208 216c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v88.02h-52.66c-11 0-20.59 6.41-25 16.72-4.5 10.52-2.38 22.62 5.44 30.81l68.12 71.78c5.34 5.59 12.47 8.69 20.09 8.69s14.75-3.09 20.09-8.7l68.12-71.75c7.81-8.2 9.94-20.31 5.44-30.83-4.41-10.31-14-16.72-25-16.72H208V216zm42.84 120.02l-58.84 62-58.84-62h117.68z"></path></svg>
                
              </a>

              <div class="type"></div>
            </div>

            <div class="px-3 mb-3">
              <div class="btn btn-primary return-to-list">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="#fff"><path d="M229.9 473.899l19.799-19.799c4.686-4.686 4.686-12.284 0-16.971L94.569 282H436c6.627 0 12-5.373 12-12v-28c0-6.627-5.373-12-12-12H94.569l155.13-155.13c4.686-4.686 4.686-12.284 0-16.971L229.9 38.101c-4.686-4.686-12.284-4.686-16.971 0L3.515 247.515c-4.686 4.686-4.686 12.284 0 16.971L212.929 473.9c4.686 4.686 12.284 4.686 16.971-.001z"/></svg>
                Return to list
              </div>
            </div>
          </div>
          <div class="col-12 col-img d-none d-lg-flex">
            <img class="photo" src="">
          </div>
        </div>

        <div class="results">
          <div class="p-3">
            <h3 class="mb-0"><span id="results-count"></span> <span id="results-count-plural">Data points</h3>
          </div>

          <table class="table results-table mb-0">
            <tbody></tbody>
          </table>

          <div class="px-3 my-3 reset-filter-container" hidden>
            <div class="btn btn-primary reset-filter">Show all data</div>
          </div>
        </div>
        

        <div class="no-results p-3">
          <h3>No results</h3>
          <div class="btn btn-primary reset-filter mt-4">Clear filter</div>
        </div>
      </div>
    </div>   
    <div class="col-lg-8 pl-lg-0">
       
      <div id="leaflet-map" class="rounded"></div>
    </div>

</div>
<button style="margin-bottom: 3vh;border-radius: 10px;"><a style="color:white" href="CSEBdocumentation.zip" download="CSEBdocumentation.zip">Documentation</a></button>
      
<footer class="">





<!--CSEB CALCULATOR BELOW!!!!!-->
<div class="container">
  <h1>Predict CSEB Properties</h1>

  <div class="input-section">
    <h2>Input Ratios</h2>

    <div>
      <label for="clay">Clay (%)</label>
      <input type="range" id="clay" min="5" max="15" value="10" oninput="updateValue('clay-value', this.value, 'unknown-clay')">
      <span id="clay-value">10</span>
      <label><input type="checkbox" id="unknown-clay" onchange="updateValue('clay-value', '', 'unknown-clay')"> Unknown</label>
    </div>

    <div>
      <label for="cement">Cement (%)</label>
      <input type="range" id="cement" min="5" max="15" value="10" oninput="updateValue('cement-value', this.value, 'unknown-cement')">
      <span id="cement-value">10</span>
      <label><input type="checkbox" id="unknown-cement" onchange="updateValue('cement-value', '', 'unknown-cement')"> Unknown</label>
    </div>

    <div>
      <label for="density">Density (Kg/m³)</label>
      <input type="range" id="density" min="1500" max="2200" value="1800" oninput="updateValue('density-value', this.value, 'unknown-density')">
      <span id="density-value">1800</span>
      <label><input type="checkbox" id="unknown-density" onchange="updateValue('density-value', '', 'unknown-density')"> Unknown</label>
    </div>

    <div>
      <label for="cement-cost">Cost per 50kg 32,5N pocket of cement in South African Rands (ZAR)</label>
      <input type="number" id="cement-cost" placeholder="Enter cost">
    </div>

    <!-- New input for distances -->
    <div>
      <label for="distance-soil">Distance to Soil Source (km)</label>
      <input type="number" id="distance-soil" placeholder="Enter distance to soil source" min="0">
    </div>

    <div>
      <label for="distance-cement">Distance to Cement Source (km)</label>
      <input type="number" id="distance-cement" placeholder="Enter distance to cement source" min="0">
    </div>

    <button onclick="calculateAll()">Strength and cost information, including 10% wastage factor</button>
  </div>

  <div class="output-section">
    <h2>Results</h2>
    <p id="prediction">Predicted 28 day compressive strength: N/A</p>
    <p id="cost-brick">Cost per brick: N/A</p>
    <p id="cost-half-brick-wall">Cost per half-brick wall: N/A</p>
    <p id="cost-one-brick-wall">Cost per one-brick wall: N/A</p>
    <p id="fuel-cost">Fuel Cost for Logistics: N/A</p>
    <p id="carbon-emissions">Carbon Emissions: N/A</p>
  </div>

  <div class="upload-section">
    <h2>Upload CSV Data</h2>
    <input type="file" id="file-upload" accept=".csv" onchange="handleFileUpload(event)">
  </div>
</div>

<script>
  const brickVolume = 0.001815; // Volume of a brick in m³
  const cementVolumePerPocket = 0.034722; // Cement volume per 50kg pocket in m³
  const cementDensity = 1440; // Density of cement in kg/m³
  const fuelConsumptionPer100km = 7; // Fuel consumption (liters per 100 km)
  const fuelCostPerLiter = 18.66; // Diesel cost per liter in ZAR
  const carbonEmissionPerLiter = 2.68; // Carbon emissions per liter of fuel in kg CO₂

  // Update slider values or show 'Unknown' if the checkbox is selected
  function updateValue(id, value, unknownCheckboxId) {
    const isUnknown = document.getElementById(unknownCheckboxId).checked;
    document.getElementById(id).textContent = isUnknown ? "Unknown" : value;
  }

  // Combined function for predicting strength and calculating cost
  function calculateAll() {
    const inputs = {
      clay: document.getElementById("unknown-clay").checked ? null : parseFloat(document.getElementById("clay").value),
      cement: document.getElementById("unknown-cement").checked ? null : parseFloat(document.getElementById("cement").value),
      density: document.getElementById("unknown-density").checked ? null : parseFloat(document.getElementById("density").value),
    };

    const cementCostPerPocket = parseFloat(document.getElementById("cement-cost").value);
    const distanceSoil = parseFloat(document.getElementById("distance-soil").value);
    const distanceCement = parseFloat(document.getElementById("distance-cement").value);

    if (!cementCostPerPocket) {
      alert("Please enter a valid cost per 50kg pocket of cement.");
      return;
    }

    // Predict compressive strength
    let predictionText = "Predicted Strength: N/A";
    if (inputs.density !== null) {
      const adjustedStrengthByDensity = densityStrengthAdjustment(inputs.density);

      const clayFactor = inputs.clay ? inputs.clay / 20 : 1; // Example normalization factor
      const cementFactor = inputs.cement ? inputs.cement / 5 : 1; // Example normalization factor

      const finalStrength = adjustedStrengthByDensity * clayFactor * cementFactor;

      predictionText = `Predicted Strength: ${finalStrength.toFixed(2)} MPa`;
    }

    // Calculate cost with 10% wastage
    const cementPercentage = inputs.cement || 0;
    const cementVolumePerBrick = (cementPercentage / 100) * brickVolume * 1.1; // Add 10% for wastage
    const pocketsPerBrick = cementVolumePerBrick / cementVolumePerPocket;
    const costPerBrick = pocketsPerBrick * cementCostPerPocket;

    const costHalfBrickWall = costPerBrick * 52;
    const costFullBrickWall = costPerBrick * 104;

    const costbrick = `Cost per Imperial brick: ${costPerBrick.toFixed(2)} ZAR`;
    const costhalfbrick = `Cost for 1m² half-brick wall: ${costHalfBrickWall.toFixed(2)} ZAR`;
    const costonebrick = `Cost for 1m² one-brick wall: ${costFullBrickWall.toFixed(2)} ZAR`;

    // Calculate logistics cost and carbon emissions
    const totalDistanceSoil = distanceSoil * fuelConsumptionPer100km / 100;
    const totalDistanceCement = distanceCement * fuelConsumptionPer100km / 100;

    // Multiply by 2 for return trip (there and back)
    const totalFuelConsumption = (totalDistanceSoil + totalDistanceCement) * 2;
    const fuelCost = (totalFuelConsumption * fuelCostPerLiter);
    const carbonEmissions = totalFuelConsumption * carbonEmissionPerLiter;

    const fuelCostText = `Fuel Cost for Logistics (there and back): ${fuelCost.toFixed(2)} ZAR`;
    const carbonEmissionsText = `Carbon Emissions (net footprint of procurement): ${carbonEmissions.toFixed(2)} kg CO₂`;

    // Display both results
    document.getElementById("prediction").textContent = predictionText;
    document.getElementById("cost-brick").textContent = costbrick;
    document.getElementById("cost-half-brick-wall").textContent = costhalfbrick;
    document.getElementById("cost-one-brick-wall").textContent = costonebrick;
    document.getElementById("fuel-cost").textContent = fuelCostText;
    document.getElementById("carbon-emissions").textContent = carbonEmissionsText;
  }

  // Exponential Adjustment for Density
  function densityStrengthAdjustment(density) {
    const baselineDensity = 1700; // Baseline at 1700 kg/m³
    const baselineStrength = 0.5; // Replace with dataset value at 1700 kg/m³
    const deviation = density - baselineDensity;

    // Apply the exponential formula: y = 0.006e^(0.0025x)
    const factor = 0.0057 * Math.exp(0.0012 * deviation) * 1000;

    return baselineStrength * factor;
  }

  // Existing file upload and CSV parsing logic
  function handleFileUpload(event) {
    const file = event.target.files[0];
    if (!file) {
      alert("No file selected. Please upload a valid CSV file.");
      return;
    }

    const reader = new FileReader();

    reader.onload = (e) => {
      try {
        const data = e.target.result;
        const parsedData = parseCSV(data);

        if (parsedData.length === 0) {
          alert("CSV file is empty or improperly formatted.");
          return;
        }

        alert("CSV data uploaded successfully!");
      } catch (error) {
        alert("Error parsing CSV file: " + error.message);
      }
    };

    reader.onerror = () => {
      alert("Failed to read the file. Please try again.");
    };

    reader.readAsText(file);
  }

  // CSV Parser (no changes to original)
  function parseCSV(data) {
    const rows = data.split("\n").map((row) => row.trim()).filter(Boolean);
    if (rows.length < 2) throw new Error("CSV must have at least a header row and one data row.");

    const headers = rows.shift().split(";").map((header) => header.trim());
    return rows.map((row) => {
      const values = row.split(";").map((value) => value.trim());
      const obj = {};
      headers.forEach((header, index) => {
        obj[header] = values[index] !== "" ? parseFloat(values[index]) || values[index] : null;
      });
      return obj;
    });
  }
</script>
<style>
  body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #f9f9f9;
}

.container {
  width: 90%;
  max-width: 800px;
  margin: 20px auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

h1, h2 {
  color: #333;
}

.input-section, .output-section, .upload-section {
  margin-top: 20px;
}

label {
  display: block;
  margin: 10px 0 5px;
  color: #555;
}

input[type="range"] {
  width: 100%;
}

span {
  margin-left: 5px;
  font-weight: bold;
}

button {
  margin-top: 10px;
  padding: 10px 20px;
  background: #007BFF;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background: #0056b3;
}

#prediction {
  font-size: 1.2em;
  color: #007BFF;
}

</style>









<!-- SUBMISSION FORM ALL CODE BELOW -->
<title>Send us your soil</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<div class="form-box">
  <form action="mailto:eyeconiccards@gmail.com" method="post" enctype="text/plain">
      <label for="uname">
          <i class="fa fa-solid fa-user"></i>
          Name
      </label>
      <input type="text" id="uname" name="uname" required>

      <label for="email">
          <i class="fa fa-solid fa-envelope"></i>
          Email Address
      </label>
      <input type="email" id="email" name="email" required>

      <label for="Arearequest">
          <i class="fa-solid fa-rocket"></i>
          Area you'd like tested/have soil to 'donate'
      </label>
      <input type="text" id="Arearequest" name="Arearequest">

      <label for="msg">
          <i class="fa-solid fa-comments" style="margin-right: 3px;"></i>
          Write your Suggestions:
      </label>
      <textarea id="msg" name="msg" rows="3" placeholder="... or email eyeconiccards@gmail.com"></textarea>

      <button type="submit" >
          Submit
      </button>
  </form>
  <style>
        .form-box {
            width: auto;
            max-width: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 4vw;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        label {
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input, textarea, button {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .radio-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        button {
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        textarea {
            resize: none;
        }
  </style>
</div>
</div>

</body>

</footer>



        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

        
<!-- leaflet js -->
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin=""></script>
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

<script>
 
// map var -----------------------------------------------------------------------------------------------------------------------------
  var map = L.map("leaflet-map").setView([-33.95608517289068, 18.461008169660417], 0);

  // add basemap  -------------------------------------------------------------------------------------------------------------------------------
  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 20,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);
  
  L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}", {
      attribution: "Map data &copy; <a href='https://www.openstreetmap.org/'>OpenStreetMap</a> contributors, <a href='https://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>, Imagery © <a href='https://www.mapbox.com/'>Mapbox</a>",
      maxZoom: 20,
      id: "mapbox/streets-v11",
      tileSize: 512,
      zoomOffset: -1,
      accessToken: "pk.eyJ1IjoibmV3YW50dHdvIiwiYSI6ImNscWF3eHFvNjFxMDkyc252bDZnMHo0bW4ifQ.aibMJNvuCUcEtYZmu9VTVw",
  }).addTo(map);



  // define icons  -----------------------------------------------------------------------------------------------------------------
  var ComingSoon = L.icon({
    iconUrl: "s1.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [35, 35],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });
  
  
  var OneMpa = L.icon({
    iconUrl: "x1.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [35, 35],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var TwoMpa = L.icon({
    iconUrl: "x2.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [35, 35],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var ThreeMpa = L.icon({
    iconUrl: "x3.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [35, 35],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var FourMpa = L.icon({
    iconUrl: "x4.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [35, 35],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var FiveMpa = L.icon({
    iconUrl: "x5.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [35, 35],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Clay1020 = L.icon({
    iconUrl: "p1.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Clay2030 = L.icon({
    iconUrl: "p2.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Clay3040 = L.icon({
    iconUrl: "p3.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Clay4050 = L.icon({
    iconUrl: "p4.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Sand5060 = L.icon({
    iconUrl: "p2.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Sand6070 = L.icon({
    iconUrl: "p3.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Sand7080 = L.icon({
    iconUrl: "p4.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Sand8090 = L.icon({
    iconUrl: "p5.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Cement5 = L.icon({
    iconUrl: "p5.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Cement7 = L.icon({
    iconUrl: "p5.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Cement9 = L.icon({
    iconUrl: "p5.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var Cement11 = L.icon({
    iconUrl: "p5.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

  var image = L.icon({
    iconUrl: "p5.png",
    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
    iconSize: [75,75],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });
  // define MAP MARKER OBJECTS --------------------------------------------------------------------------------------------------------
  
    const entry_1 = L.marker([-33.957096022743414, 18.461944479076145], {
      "icon": OneMpa,
      "properties": {
        "name": "//Dummy Site #1",
        "date": "18/11/24",
        "type": "OneMpa", 
        "clay": "Clay3040",
        "sand": "Sand5060",
        "cement":"Cement5",
      },
    });
  
    const entry_2 = L.marker([-33.96008424171533, 18.46023279636653], {
      "icon": TwoMpa,
      "properties": {
        "name": "//Dummy Site #2",
        "date": "18/11/24",
        "type": "TwoMpa",
        "clay": "Clay4050",
        "sand": "Sand7080",
      },
    });

    const entry_3 = L.marker([-33.95479885219124, 18.4605345673696], {
      "icon": ThreeMpa,
      "properties": {
        "name": "//Dummy Site #3",
        "date": "18/11/24",
        "type": "ThreeMpa",
        "clay": "Clay1020",
        "sand": "Sand6070",
        "cement":"Cement7",
      },
    });

    const entry_4 = L.marker([-33.96479885219124, 18.4603345673696], {
      "icon": FourMpa,
      "properties": {
        "name": "//Dummy Site #4",
        "date": "18/11/24",
        "type": "FourMpa",
        "clay": "Clay2030",
        "sand": "Sand6070",
        "cement":"Cement9",

      },
    });

    const entry_5 = L.marker([-33.96911885219124, 18.4610345673696], {
      "icon": FiveMpa,
      "properties": {
        "name": "//Dummy Site #5",
        "date": "18/11/24",
        "type": "FiveMpa",
        "clay": "Clay1020",
        "sand": "Sand8090",
      },
    });

    const entry_6 = L.marker([-33.96925885219124, 18.46068345673696], {
      "icon": OneMpa,
      "properties": {
        "name": "//Dummy Site #6",
        "date": "18/11/24",
        "type": "OneMpa",
        "clay": "Clay1020",
        "sand": "Sand5060",
        "cement":"Cement11",

      },
    });

    const entry_7 = L.marker([-33.96900085219124, 18.4607445673696], {
      "icon": ThreeMpa,
      "properties": {
        "name": "//Dummy Site #7",
        "date": "18/11/24",
        "type": "ThreeMpa",
        "clay": "Clay2030",
        "sand": "Sand8090",
        "cement":"Cement9",

      },
    });

    const entry_8 = L.marker([-33.96999885219124, 18.4604345673696], {
      "icon": TwoMpa,
      "properties": {
        "name": "//Dummy Site #8",
        "date": "18/11/24",
        "type": "TwoMpa", 
        "clay": "Clay3040",
        "sand": "Sand8090",
        "cement":"Cement7",

      },
    });

    const entry_9 = L.marker([-33.96979880009124, 18.4609111673696], {
      "icon": FiveMpa,
      "properties": {
        "name": "//Dummy Site #9",
        "date": "18/11/24",
        "type": "FiveMpa",
        "clay": "Clay4050",
        "sand": "Sand6070",
        "cement":"Cement5",

      },
    });

    const entry_10 = L.marker([-33.804092, 18.886304], {
      "icon": FiveMpa,
      "properties": {
        "name": "Site #9, Anura estate, roadworks",
        "date": "19/11/24",
        "type": "FiveMpa",
        "clay": "Clay4050",
        "sand": "Sand6070",
        "cement":"Cement5",
        "image": "Anura.jpeg"
      },
    });

    const entry_11 = L.marker([-33.911512, 19.109799], {
      "icon": FiveMpa,
      "properties": {
        "name": "Site #10, Otters Bend trial pits",
        "date": "20/11/24",
        "type": "FiveMpa",
        "clay": "Clay4050",
        "sand": "Sand6070",
        "cement":"Cement5",
        "image": "OttersBend.jpeg"
      },
    });

    const entry_12 = L.marker([-34.029291, 18.363252], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });

    const entry_13 = L.marker([-34.131993, 18.377964], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });

    const entry_14 = L.marker([-33.917444, 18.920897], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });

    const entry_15 = L.marker([-34.090320, 18.816042], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });

    const entry_16 = L.marker([-33.754069, 18.606007], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });

    const entry_17 = L.marker([-33.735594, 18.483917], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });

    const entry_18 = L.marker([-33.859768, 18.614083], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });

    const entry_19 = L.marker([-34.064270, 18.583274], {
      "icon": ComingSoon,
      "properties": {
        "name": "Coming soon!",
        "date": "",
        "type": "",
        "clay": "",
        "sand": "",
        "cement":"",
        "image": ""
      },
    });
    
  const allEntries = [
    
      entry_1,
    
      entry_2,
    
      entry_3,

      entry_4,

      entry_5,

      entry_6,

      entry_7,

      entry_8, 

      entry_9, 

      entry_10,

      entry_11,

      entry_12,

      entry_13,

      entry_14,

      entry_15,

      entry_16,

      entry_17,

      entry_18,

      entry_19,

  ];

  alert("VERY experimental 'under construction' project");


  // function when selecting a marker
function selectMarker(e) {
  let properties = e.sourceTarget.options.properties;

  // Show the details section and remove the "no-results" class
  $("#details").addClass("show-project").removeClass("no-results results");

  // Update the project details with the marker properties
  $(".project-details .name").text(properties.name);
  $(".project-details .type").html(properties.type);
  $(".project-details .clay").text(properties.clay);
  $(".project-details .sand").text(properties.sand);
  $(".project-details .cement").text(properties.cement);
  $(".project-details .image").text(properties.image);



  // Add the image to the project details
  $(".project-details .image").html(`<img src="${properties.image}" + "${properties.name}" style="width: 100%; max-width: 200px;">`);
}

  // unselect project and return to list
  function unselectMarker() {
    $("#details").removeClass("show-project").addClass("results");
    $(".leaflet-tooltip").remove();
  }

  // button to unselect marker and return to list
  $(".return-to-list").click(function() {
    unselectMarker();
    filterMarkers()
  })

  // make a feature group with all listings and add it to the map
  const allMarkers = L.featureGroup(allEntries).bindTooltip(function(layer) {return String(layer.options.properties.name)}).on("click", selectMarker);

  var clusteredMarkers = L.markerClusterGroup();
  clusteredMarkers.addLayer(allMarkers);
  map.addLayer(clusteredMarkers);

  var filteredLayer = false;
  var clusteredFilteredMarkers = false;

  // function to show filtered items on the map
  function filterMarkers() {
    // if a filtered layer exists, remove it from the map
    // if not, remove all markers
    if (filteredLayer != false) {
      clusteredFilteredMarkers.removeFrom(map)
    } else {
      clusteredMarkers.removeFrom(map)
    };

    // check what the user has selected in the dropdowns
    let type = $(".filters select.type").val()
    let clay = $(".filters select.clay").val()
    let sand = $(".filters select.sand").val()
    let cement = $(".filters select.cement").val()



    let filteredEntries = allEntries;

    if (type != "all") {
      filteredEntries = filteredEntries.filter(entry => entry.options.properties.type == type);
    }
    if (clay != "all") {
      filteredEntries = filteredEntries.filter(entry => entry.options.properties.clay == clay);
    }
    if (sand != "all") {
      filteredEntries = filteredEntries.filter(entry => entry.options.properties.sand == sand);
    }
    if (cement != "all") {
      filteredEntries = filteredEntries.filter(entry => entry.options.properties.cement == cement);
    }

    if (filteredEntries.length > 0) {
      $("#details").removeClass("no-results show-project").addClass("results");

      $("#results-count").text(filteredEntries.length)
      if (filteredEntries.length == 1) {
        $("#results-count-plural").text("Specimens")
      } else {
        $("#results-count-plural").text("Specimens")
      }

      $(".results-table tbody").html("");

      filteredLayer = L.featureGroup(filteredEntries).bindTooltip(function(layer) {return String(layer.options.properties.clay)});

      clusteredFilteredMarkers = L.markerClusterGroup();
      clusteredFilteredMarkers.addLayer(filteredLayer);
      map.addLayer(clusteredFilteredMarkers);

      $(filteredLayer.getLayers()).each(function() {
        $(".results-table tbody").append("<tr class='listed-project' data-id='" + this._leaflet_id + "'><td>" + this.options.properties.date + " ; "+ this.options.properties.name+ "</td><tr>");
      })

//+ " "+ this.options.properties.name + " "+ this.options.properties.type + " "+ this.options.properties.clay + " "+ this.options.properties.sand + " "+ this.options.properties.cement

      map.fitBounds(filteredLayer.getBounds())
    } else {
      noFilterResults()
    }

    if (filteredEntries.length < 289) {
      $(".reset-filter-container").removeAttr("hidden")
    } else {
      $(".reset-filter-container").attr("hidden", "hidden")
    }
  }

  // run filter whenever one of the dropdown filters changes
  $(".filters select").change(function() {
    filterMarkers()
  })

  $(".filters .search").keyup(function() {
    filterMarkers();
  })

  // function to run when there are no filter matches
  function noFilterResults() {
    $("#details").addClass("no-results").removeClass("show-project results");
  }

  // clear all filters with button
  $(".reset-filter").click(function() {
    $("select.filter").val("all")
    $(".search.filter").val("")
    filterMarkers();
  })

  $(document.body).on("click", ".listed-project", function (event) {
    // Retrieve the Leaflet ID of the clicked item
    const markerId = $(this).data("id");

    // Find the corresponding marker in the filteredLayer
    const marker = filteredLayer.getLayer(markerId);

    if (marker) {
        // Zoom to the marker's position
        map.setView(marker.getLatLng(), 19); // Adjust zoom level as needed

        // Open the marker's popup or show a highlight effect
        if (marker.getPopup()) {
            marker.openPopup();
        } else {
            // Optional: Add a visual highlight to the marker
            $(marker._icon).addClass("highlighted-marker");
            setTimeout(() => {
                $(marker._icon).removeClass("highlighted-marker");
            }, 2000); // Remove highlight after 2 seconds
        }
    }
});

  // set the bounds of the map around all content
  map.fitBounds(allMarkers.getBounds())

  // Call filterMarkers on page load to display all data
  filterMarkers();

  /* CLAY HEAT MAP
  map.addSource('clay-data', {
  'type': 'geojson',
  'data': 'URL_TO_YOUR_CLAY_CONTENT_GEOJSON'
});

  map.addLayer({
  'id': 'clay-heatmap',
  'type': 'heatmap',
  'source': 'clay-data',
  'paint': {
    // Adjust the heatmap colors to represent clay content percentages
    'heatmap-color': [
      'interpolate',
      ['linear'],
      ['heatmap-density'],
      0, 'rgba(0, 0, 255, 0)',
      0.2, 'rgb(0, 255, 0)',
      0.4, 'rgb(255, 255, 0)',
      0.6, 'rgb(255, 0, 0)',
      1, 'rgb(128, 0, 0)'
    ],
    // Adjust other heatmap properties as needed
    'heatmap-radius': 30,
    'heatmap-opacity': 0.7
  }
}); */
</script>

<div class="container1" style="margin-left: 10vw; margin-right: 10vw; margin-bottom: 7vh;">
  <div class="row">
    <div>
      <h4>Special thanks to the Center for Materials Engineering (CME) UCT for their support!</h4>
      <a href="https://ebe.uct.ac.za/materials-engineering/">https://ebe.uct.ac.za/materials-engineering/</a>
    </div>
    <div class="col-md p-6 p-lg-0 col-lg-6 d-flex">
        <br>
      <img width="200vw" style="margin-top:2vh" class="footer-logo" src="CME.png">
    </div>
  </div>
</div>

    </body>
</html>